import{_ as A,r as a,o as B,a as r,c as u,b as e,t as D,w as d,v as I,d as O,e as V,f as m,g as R,u as g,h as k,F as S,i as P,j as L,p as q,k as C,l as N}from"./bootstrap.min-cc88e5dd.js";const j="/assets/setting.png";const l=p=>(q("data-v-f012d379"),p=p(),C(),p),E=l(()=>e("img",{src:j,alt:"Your Image",class:"img-fluid",style:{width:"30px",height:"30px"},"data-bs-toggle":"modal","data-bs-target":"#settingModal"},null,-1)),K={class:"modal fade",id:"settingModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},W={class:"modal-dialog"},X={class:"modal-content"},Y=l(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"设置"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),z={class:"modal-body"},G=l(()=>e("p",null,"© 2022-2023 FlyStudioKey. All Rights Reserved.",-1)),H=l(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"关闭")],-1)),J={key:0,class:"container d-flex justify-content-center align-items-center centered-div"},Q={class:"text-center"},Z=l(()=>e("h1",{class:"display-4"},"番茄小说下载器",-1)),$={class:"form-check form-check-inline"},ee=l(()=>e("label",{class:"form-check-label",for:"singleDownload"},"单文件下载",-1)),te={class:"form-check form-check-inline"},le=l(()=>e("label",{class:"form-check-label",for:"bulkDownload"},"批量下载",-1)),oe={class:"mt-3"},se=l(()=>e("label",{for:"formatOption"},"文件格式：",-1)),ae=l(()=>e("option",{value:"txt"},"TXT(普通文档)",-1)),ne=l(()=>e("option",{value:"epub"},"EPUB(电子书)",-1)),ie=[ae,ne],de={key:0,class:"mt-3 url-box"},re=l(()=>e("label",{for:"urlInput"},"URL：",-1)),ue={key:1,class:"mt-3 url-box"},ce=l(()=>e("label",{for:"bulkUrlInput"},"URL（每行一个）：",-1)),_e=l(()=>e("br",null,null,-1)),pe=l(()=>e("br",null,null,-1)),ve={class:"alert alert-success"},he=l(()=>e("strong",null,"成功!",-1)),fe={class:"alert alert-warning"},me=l(()=>e("strong",null,"警告!",-1)),ge={class:"alert alert-warning"},be=l(()=>e("strong",null,"警告!",-1)),ye=l(()=>e("button",{class:"btn btn-primary mt-3"},[e("a",{href:"/history",style:{"text-decoration":"none",color:"inherit"}},"下载任务")],-1)),we={__name:"App",setup(p){const M=a(!0);let v=a(!1),h=a(!1),f=a(!1),b=a([]);a([]);const n=a("single"),i=a(""),y=a(""),c=a("epub"),w=a("");document.title="番茄小说下载器";let _=[];const T=async()=>{if(v.value=!1,h.value=!1,f.value=!1,n.value==="single")if(console.log("Downloading single file:",i.value),x(i.value)&&(i.value.includes("/page/")||i.value.includes("&book_id="))){console.log("Downloading single file:",i.value);let s=await U([i.value],c.value);s.data.return.length>0?(b.value=s.data.return,f.value=!0):v.value=!0}else h.value=!0;else if(n.value==="bulk")if(_=y.value.split(`
`),console.log("Downloading multiple files:",_),_.every(t=>x(t)&&(t.includes("/page/")||t.includes("&book_id=")))){console.log("Downloading multiple files:",_);let t=await U(_,c.value);t.data.return.length>0?(b.value=t.data.return,f.value=!0):v.value=!0}else h.value=!0};function x(s){return/^https?:\/\/.+/.test(s)}async function U(s,t){try{const o=await L.post("/api/down/",{urls:s,format:t});return console.log("POST request successful:",o.data),o}catch(o){console.error("POST request failed:",o)}}const F=async()=>{try{const s=await L.get("/api/get_config/");console.log(s.data),c.value=s.data.default_download_mode,w.value=s.data.version,console.log("Fetched config:",w.value)}catch(s){console.error("Failed to fetch history data:",s)}};return B(()=>{F()}),(s,t)=>(r(),u(S,null,[E,e("div",K,[e("div",W,[e("div",X,[Y,e("div",z,[e("p",null,"当前版本： "+D(w.value),1),G]),H])])]),M.value?(r(),u("div",J,[e("div",Q,[Z,e("div",$,[d(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"singleDownload",value:"single","onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o)},null,512),[[I,n.value]]),ee]),e("div",te,[d(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"bulkDownload",value:"bulk","onUpdate:modelValue":t[1]||(t[1]=o=>n.value=o)},null,512),[[I,n.value]]),le]),e("div",oe,[se,d(e("select",{class:"form-control",id:"formatOption","onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o)},ie,512),[[O,c.value]])]),n.value==="single"?(r(),u("div",de,[re,d(e("input",{type:"text",class:"form-control",id:"urlInput","onUpdate:modelValue":t[3]||(t[3]=o=>i.value=o),placeholder:"输入URL"},null,512),[[V,i.value]])])):m("",!0),n.value==="bulk"?(r(),u("div",ue,[ce,d(e("textarea",{class:"form-control",id:"bulkUrlInput",rows:"5","onUpdate:modelValue":t[4]||(t[4]=o=>y.value=o),placeholder:"输入多个URL，每行一个"},null,512),[[V,y.value]])])):m("",!0),e("button",{class:"btn btn-primary mt-3",onClick:T},"提交"),_e,pe,d(e("div",ve,[he,k(" 加入下载列表！ ")],512),[[R,g(v)]]),d(e("div",fe,[me,k(" 请输入正确的目录链接！ ")],512),[[R,g(h)]]),g(f)?(r(!0),u(S,{key:2},P(g(b),o=>(r(),u("div",ge,[be,k(" "+D(o)+" 重复提交 ",1)]))),256)):m("",!0)]),ye])):m("",!0)],64))}},ke=A(we,[["__scopeId","data-v-f012d379"]]);N(ke).mount("#app");
