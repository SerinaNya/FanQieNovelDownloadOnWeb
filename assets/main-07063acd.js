import{_ as I,r as n,o as f,c as m,a as e,w as i,v as w,b as S,d as k,e as h,f as y,u as x,g as U,h as T,p as R,i as B,j as O}from"./bootstrap.min-c4c061eb.js";const t=r=>(R("data-v-46c5e18a"),r=r(),B(),r),P={key:0,class:"container d-flex justify-content-center align-items-center centered-div"},A={class:"text-center"},L=t(()=>e("h1",{class:"display-4"},"番茄小说下载器",-1)),q={class:"form-check form-check-inline"},M=t(()=>e("label",{class:"form-check-label",for:"singleDownload"},"单文件下载",-1)),N={class:"form-check form-check-inline"},j=t(()=>e("label",{class:"form-check-label",for:"bulkDownload"},"批量下载",-1)),C={class:"mt-3"},E=t(()=>e("label",{for:"formatOption"},"文件格式：",-1)),F=t(()=>e("option",{value:"txt"},"TXT(普通文档)",-1)),W=t(()=>e("option",{value:"epub"},"EPUB(电子书)",-1)),X=[F,W],z={key:0,class:"mt-3 url-box"},G=t(()=>e("label",{for:"urlInput"},"URL：",-1)),H={key:1,class:"mt-3 url-box"},J=t(()=>e("label",{for:"bulkUrlInput"},"URL（每行一个）：",-1)),K=t(()=>e("br",null,null,-1)),Q=t(()=>e("br",null,null,-1)),Y={class:"alert alert-success"},Z=t(()=>e("strong",null,"成功!",-1)),$={class:"alert alert-warning"},ee=t(()=>e("strong",null,"警告!",-1)),le=t(()=>e("button",{class:"btn btn-primary mt-3"},[e("a",{href:"/history",style:{"text-decoration":"none",color:"inherit"}},"下载任务")],-1)),oe={__name:"App",setup(r){const V=n(!0);let d=n(!1),p=n(!1);const s=n("single"),a=n(""),v=n(""),_=n("epub");let u=[];const D=async()=>{d.value=!1,p.value=!1,s.value==="single"?(console.log("Downloading single file:",a.value),b(a.value)&&a.value.includes("/page/")?(console.log("Downloading single file:",a.value),d.value=!0,await g([a.value],_.value)):p.value=!0):s.value==="bulk"&&(u=v.value.split(`
`),console.log("Downloading multiple files:",u),u.every(l=>b(l)&&l.includes("/page/"))?(console.log("Downloading multiple files:",u),d.value=!0,await g(u,_.value)):p.value=!0)};function b(c){return/^https?:\/\/.+/.test(c)}async function g(c,l){try{const o=await T.post("/api/down/",{urls:c,format:l});console.log("POST request successful:",o.data)}catch(o){console.error("POST request failed:",o)}}return(c,l)=>V.value?(f(),m("div",P,[e("div",A,[L,e("div",q,[i(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"singleDownload",value:"single","onUpdate:modelValue":l[0]||(l[0]=o=>s.value=o)},null,512),[[w,s.value]]),M]),e("div",N,[i(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"bulkDownload",value:"bulk","onUpdate:modelValue":l[1]||(l[1]=o=>s.value=o)},null,512),[[w,s.value]]),j]),e("div",C,[E,i(e("select",{class:"form-control",id:"formatOption","onUpdate:modelValue":l[2]||(l[2]=o=>_.value=o)},X,512),[[S,_.value]])]),s.value==="single"?(f(),m("div",z,[G,i(e("input",{type:"text",class:"form-control",id:"urlInput","onUpdate:modelValue":l[3]||(l[3]=o=>a.value=o),placeholder:"输入URL"},null,512),[[k,a.value]])])):h("",!0),s.value==="bulk"?(f(),m("div",H,[J,i(e("textarea",{class:"form-control",id:"bulkUrlInput",rows:"5","onUpdate:modelValue":l[4]||(l[4]=o=>v.value=o),placeholder:"输入多个URL，每行一个"},null,512),[[k,v.value]])])):h("",!0),e("button",{class:"btn btn-primary mt-3",onClick:D},"提交"),K,Q,i(e("div",Y,[Z,U(" 加入下载列表！ ")],512),[[y,x(d)]]),i(e("div",$,[ee,U(" 请输入正确的目录链接！ ")],512),[[y,x(p)]])]),le])):h("",!0)}},te=I(oe,[["__scopeId","data-v-46c5e18a"]]);O(te).mount("#app");
