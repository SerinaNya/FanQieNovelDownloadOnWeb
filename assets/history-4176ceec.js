import{_ as g,r as n,l as m,o as l,c as i,a as t,F as _,h as w,w as b,f as k,u as h,t as d,i as p,n as S,g as x,p as F,j as I,k as A}from"./bootstrap.min-e5701824.js";const D=a=>(F("data-v-11dc011c"),a=a(),I(),a),$=D(()=>t("div",{class:"title"},[t("h1",{class:"display-4"},"下载任务")],-1)),B={class:"centered-div"},C={class:"progress"},L=["onClick"],N={class:"alert alert-success"},V={__name:"App",setup(a){const r=n([]);let c=n(!1),u=n("");document.title="番茄小说下载器 | 下载任务";const y=async(e,o)=>{c.value=!1;try{const s=await p.get(`/api/down/del/${e}/`);c.value=!0,location.reload()}catch(s){console.error("Failed to fetch history data:",s)}},v=async()=>{try{const e=await p.get("/api/history/");r.value=e.data,f()}catch(e){console.error("Failed to fetch history data:",e)}},f=()=>{setInterval(async()=>{for(const e of r.value.history)if(e.percent!==100)try{const o=await p.get(`/api/history/${e.obid}/`);e.percent=o.data.percent}catch(o){console.error("Failed to fetch progress:",o)}},800)};return m(()=>{v()}),(e,o)=>(l(),i(_,null,[$,t("div",B,[(l(!0),i(_,null,w(r.value.history,s=>(l(),i("div",{key:s.obid,class:"history-item"},[t("h2",null,d(s.file_name),1),t("div",C,[t("div",{class:"progress-bar",style:S({width:`${s.percent}%`})},null,4)]),t("div",null,[x(d(s.percent)+"% ",1),t("button",{class:"btn btn-danger mt-3",onClick:z=>y(s.obid,s.file_name)},"删除",8,L)])]))),128)),b(t("div",N,[t("strong",null,d(h(u))+" 删除成功!",1)],512),[[k,h(c)]])])],64))}},j=g(V,[["__scopeId","data-v-11dc011c"]]);A(j).mount("#app");
