import{_ as R,r as s,o as c,c as d,a as e,w as r,v as U,b as T,d as D,e as m,f as V,u as g,g as k,F as L,h as B,i as O,t as P,p as A,j as F,k as q}from"./bootstrap.min-e5701824.js";const o=p=>(A("data-v-8c0b46e6"),p=p(),F(),p),M={key:0,class:"container d-flex justify-content-center align-items-center centered-div"},N={class:"text-center"},j=o(()=>e("h1",{class:"display-4"},"番茄小说下载器",-1)),C={class:"form-check form-check-inline"},E=o(()=>e("label",{class:"form-check-label",for:"singleDownload"},"单文件下载",-1)),W={class:"form-check form-check-inline"},X=o(()=>e("label",{class:"form-check-label",for:"bulkDownload"},"批量下载",-1)),z={class:"mt-3"},G=o(()=>e("label",{for:"formatOption"},"文件格式：",-1)),H=o(()=>e("option",{value:"txt"},"TXT(普通文档)",-1)),J=o(()=>e("option",{value:"epub"},"EPUB(电子书)",-1)),K=[H,J],Q={key:0,class:"mt-3 url-box"},Y=o(()=>e("label",{for:"urlInput"},"URL：",-1)),Z={key:1,class:"mt-3 url-box"},$=o(()=>e("label",{for:"bulkUrlInput"},"URL（每行一个）：",-1)),ee=o(()=>e("br",null,null,-1)),te=o(()=>e("br",null,null,-1)),le={class:"alert alert-success"},oe=o(()=>e("strong",null,"成功!",-1)),se={class:"alert alert-warning"},ae=o(()=>e("strong",null,"警告!",-1)),ne={class:"alert alert-warning"},ie=o(()=>e("strong",null,"警告!",-1)),re=o(()=>e("button",{class:"btn btn-primary mt-3"},[e("a",{href:"/history",style:{"text-decoration":"none",color:"inherit"}},"下载任务")],-1)),ue={__name:"App",setup(p){const I=s(!0);let _=s(!1),v=s(!1),f=s(!1),b=s([]);const a=s("single"),i=s(""),w=s(""),h=s("epub");let u=[];const S=async()=>{if(_.value=!1,v.value=!1,f.value=!1,a.value==="single")if(console.log("Downloading single file:",i.value),y(i.value)&&i.value.includes("/page/")){console.log("Downloading single file:",i.value),_.value=!0;let n=await x([i.value],h.value);n.data.return.length>0&&(b.value=n.data.return,f.value=!0)}else v.value=!0;else if(a.value==="bulk")if(u=w.value.split(`
`),console.log("Downloading multiple files:",u),u.every(t=>y(t)&&t.includes("/page/"))){console.log("Downloading multiple files:",u),_.value=!0;let t=await x(u,h.value);t.data.return.length>0&&(b.value=t.data.return,f.value=!0)}else v.value=!0};function y(n){return/^https?:\/\/.+/.test(n)}async function x(n,t){try{const l=await O.post("http://127.0.0.1:8000/api/down/",{urls:n,format:t});return console.log("POST request successful:",l.data),l}catch(l){console.error("POST request failed:",l)}}return(n,t)=>I.value?(c(),d("div",M,[e("div",N,[j,e("div",C,[r(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"singleDownload",value:"single","onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l)},null,512),[[U,a.value]]),E]),e("div",W,[r(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"bulkDownload",value:"bulk","onUpdate:modelValue":t[1]||(t[1]=l=>a.value=l)},null,512),[[U,a.value]]),X]),e("div",z,[G,r(e("select",{class:"form-control",id:"formatOption","onUpdate:modelValue":t[2]||(t[2]=l=>h.value=l)},K,512),[[T,h.value]])]),a.value==="single"?(c(),d("div",Q,[Y,r(e("input",{type:"text",class:"form-control",id:"urlInput","onUpdate:modelValue":t[3]||(t[3]=l=>i.value=l),placeholder:"输入URL"},null,512),[[D,i.value]])])):m("",!0),a.value==="bulk"?(c(),d("div",Z,[$,r(e("textarea",{class:"form-control",id:"bulkUrlInput",rows:"5","onUpdate:modelValue":t[4]||(t[4]=l=>w.value=l),placeholder:"输入多个URL，每行一个"},null,512),[[D,w.value]])])):m("",!0),e("button",{class:"btn btn-primary mt-3",onClick:S},"提交"),ee,te,r(e("div",le,[oe,k(" 加入下载列表！ ")],512),[[V,g(_)]]),r(e("div",se,[ae,k(" 请输入正确的目录链接！ ")],512),[[V,g(v)]]),g(f)?(c(!0),d(L,{key:2},B(g(b),l=>(c(),d("div",ne,[ie,k(" "+P(l)+" 重复提交 ",1)]))),256)):m("",!0)]),re])):m("",!0)}},ce=R(ue,[["__scopeId","data-v-8c0b46e6"]]);q(ce).mount("#app");
