import{_ as L,r as a,o as B,a as d,c as p,b as e,w as i,v as U,d as O,e as D,f as m,g as V,u as g,h as k,F as P,i as A,j as I,t as F,p as M,k as q,l as N}from"./bootstrap.min-cc88e5dd.js";const o=_=>(M("data-v-8ac35fab"),_=_(),q(),_),j={key:0,class:"container d-flex justify-content-center align-items-center centered-div"},C={class:"text-center"},E=o(()=>e("h1",{class:"display-4"},"番茄小说下载器",-1)),W={class:"form-check form-check-inline"},X=o(()=>e("label",{class:"form-check-label",for:"singleDownload"},"单文件下载",-1)),z={class:"form-check form-check-inline"},G=o(()=>e("label",{class:"form-check-label",for:"bulkDownload"},"批量下载",-1)),H={class:"mt-3"},J=o(()=>e("label",{for:"formatOption"},"文件格式：",-1)),K=o(()=>e("option",{value:"txt"},"TXT(普通文档)",-1)),Q=o(()=>e("option",{value:"epub"},"EPUB(电子书)",-1)),Y=[K,Q],Z={key:0,class:"mt-3 url-box"},$=o(()=>e("label",{for:"urlInput"},"URL：",-1)),ee={key:1,class:"mt-3 url-box"},te=o(()=>e("label",{for:"bulkUrlInput"},"URL（每行一个）：",-1)),le=o(()=>e("br",null,null,-1)),oe=o(()=>e("br",null,null,-1)),se={class:"alert alert-success"},ae=o(()=>e("strong",null,"成功!",-1)),ne={class:"alert alert-warning"},re=o(()=>e("strong",null,"警告!",-1)),ie={class:"alert alert-warning"},ue=o(()=>e("strong",null,"警告!",-1)),ce=o(()=>e("button",{class:"btn btn-primary mt-3"},[e("a",{href:"/history",style:{"text-decoration":"none",color:"inherit"}},"下载任务")],-1)),de={__name:"App",setup(_){const S=a(!0);let v=a(!1),f=a(!1),h=a(!1),b=a([]);const n=a("single"),r=a(""),w=a(""),u=a("epub");document.title="番茄小说下载器";let c=[];const R=async()=>{if(v.value=!1,f.value=!1,h.value=!1,n.value==="single")if(console.log("Downloading single file:",r.value),y(r.value)&&r.value.includes("/page/")){console.log("Downloading single file:",r.value);let s=await x([r.value],u.value);s.data.return.length>0?(b.value=s.data.return,h.value=!0):v.value=!0}else f.value=!0;else if(n.value==="bulk")if(c=w.value.split(`
`),console.log("Downloading multiple files:",c),c.every(t=>y(t)&&t.includes("/page/"))){console.log("Downloading multiple files:",c);let t=await x(c,u.value);t.data.return.length>0?(b.value=t.data.return,h.value=!0):v.value=!0}else f.value=!0};function y(s){return/^https?:\/\/.+/.test(s)}async function x(s,t){try{const l=await I.post("/api/down/",{urls:s,format:t});return console.log("POST request successful:",l.data),l}catch(l){console.error("POST request failed:",l)}}const T=async()=>{try{const s=await I.get("/api/get_config/");console.log(s.data),u.value=s.data.default_download_mode}catch(s){console.error("Failed to fetch history data:",s)}};return B(()=>{T()}),(s,t)=>S.value?(d(),p("div",j,[e("div",C,[E,e("div",W,[i(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"singleDownload",value:"single","onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l)},null,512),[[U,n.value]]),X]),e("div",z,[i(e("input",{class:"form-check-input",type:"radio",name:"downloadType",id:"bulkDownload",value:"bulk","onUpdate:modelValue":t[1]||(t[1]=l=>n.value=l)},null,512),[[U,n.value]]),G]),e("div",H,[J,i(e("select",{class:"form-control",id:"formatOption","onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l)},Y,512),[[O,u.value]])]),n.value==="single"?(d(),p("div",Z,[$,i(e("input",{type:"text",class:"form-control",id:"urlInput","onUpdate:modelValue":t[3]||(t[3]=l=>r.value=l),placeholder:"输入URL"},null,512),[[D,r.value]])])):m("",!0),n.value==="bulk"?(d(),p("div",ee,[te,i(e("textarea",{class:"form-control",id:"bulkUrlInput",rows:"5","onUpdate:modelValue":t[4]||(t[4]=l=>w.value=l),placeholder:"输入多个URL，每行一个"},null,512),[[D,w.value]])])):m("",!0),e("button",{class:"btn btn-primary mt-3",onClick:R},"提交"),le,oe,i(e("div",se,[ae,k(" 加入下载列表！ ")],512),[[V,g(v)]]),i(e("div",ne,[re,k(" 请输入正确的目录链接！ ")],512),[[V,g(f)]]),g(h)?(d(!0),p(P,{key:2},A(g(b),l=>(d(),p("div",ie,[ue,k(" "+F(l)+" 重复提交 ",1)]))),256)):m("",!0)]),ce])):m("",!0)}},pe=L(de,[["__scopeId","data-v-8ac35fab"]]);N(pe).mount("#app");
