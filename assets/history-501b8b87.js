import{_ as b,r as i,l as g,o as a,c as r,a as t,F as _,h as k,w as m,f as w,u as h,t as d,i as p,n as S,g as x,p as F,j as I,k as A}from"./bootstrap.min-e5701824.js";const D=n=>(F("data-v-9fbb924a"),n=n(),I(),n),$=D(()=>t("div",{class:"title"},[t("h1",{class:"display-4"},"下载任务")],-1)),B={class:"centered-div"},C={class:"progress"},L={class:"progress-div"},N=["href"],V={key:1,class:"btn btn-secondary",disabled:""},j=["onClick"],z={class:"alert alert-success"},E={__name:"App",setup(n){const c=i([]);let l=i(!1),u=i("");document.title="番茄小说下载器 | 下载任务";const y=async(s,o)=>{l.value=!1;try{const e=await p.get(`/api/down/del/${s}/`);l.value=!0,location.reload()}catch(e){console.error("Failed to fetch history data:",e)}},f=async()=>{try{const s=await p.get("/api/history/");c.value=s.data,v()}catch(s){console.error("Failed to fetch history data:",s)}},v=()=>{setInterval(async()=>{for(const s of c.value.history)if(s.percent!==100)try{const o=await p.get(`/api/history/${s.obid}/`);s.percent=o.data.percent}catch(o){console.error("Failed to fetch progress:",o)}},800)};return g(()=>{f()}),(s,o)=>(a(),r(_,null,[$,t("div",B,[(a(!0),r(_,null,k(c.value.history,e=>(a(),r("div",{key:e.obid,class:"history-item"},[t("h2",null,d(e.file_name),1),t("div",C,[t("div",{class:"progress-bar",style:S({width:`${e.percent}%`})},null,4)]),t("div",L,[x(d(e.percent)+"% ",1),e.percent===100?(a(),r("a",{key:0,href:"https://dl.flystudiokey.cn/"+e.file_name,class:"btn btn-primary"}," 下载 ",8,N)):(a(),r("button",V," 下载 ")),t("button",{class:"btn btn-danger mt-3",onClick:M=>y(e.obid,e.file_name)},"删除",8,j)])]))),128)),m(t("div",z,[t("strong",null,d(h(u))+" 删除成功!",1)],512),[[w,h(l)]])])],64))}},H=b(E,[["__scopeId","data-v-9fbb924a"]]);A(H).mount("#app");
